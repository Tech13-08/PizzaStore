<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pizza Store - Dashboard</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/dashboard.css" />
  </head>
  <body>
    <div class="dashboard-container">
      <aside class="sidebar">
        <div class="logo">
          <h2>Pizza Store</h2>
        </div>
        <nav class="nav-menu">
          <ul>
            <li><a href="#" id="profile-tab" class="active">My Profile</a></li>
            <li><a href="#" id="menu-tab">Browse Menu</a></li>
            <li><a href="#" id="order-tab">Place Order</a></li>
            <li><a href="#" id="history-tab">Order History</a></li>
            <li><a href="#" id="stores-tab">View Stores</a></li>
            <li id="manager-menu-item" style="display: none">
              <a href="#" id="update-menu-tab">Update Menu</a>
            </li>
            <li id="manager-users-item" style="display: none">
              <a href="#" id="update-user-tab">Update Users</a>
            </li>
            <li id="driver-status-item" style="display: none">
              <a href="#" id="update-status-tab">Update Order Status</a>
            </li>
          </ul>
        </nav>
        <div class="user-info">
          <p>Logged in as: <span id="logged-user">User</span></p>
          <p>Role: <span id="user-role">Customer</span></p>
          <button id="logout-btn" class="btn secondary-btn">Logout</button>
        </div>
      </aside>

      <main class="content-area">
        <!-- Profile Section -->
        <section id="profile-section" class="dashboard-section active">
          <h2>My Profile</h2>
          <div class="card">
            <div id="profile-info">
              <p>
                <strong>Username:</strong> <span id="profile-username"></span>
              </p>
              <p>
                <strong>Phone Number:</strong> <span id="profile-phone"></span>
              </p>
              <p>
                <strong>Favorite Item:</strong>
                <span id="profile-favorite"></span>
              </p>
            </div>
            <div class="update-profile">
              <h3>Update Profile</h3>
              <form id="update-profile-form">
                <div class="form-group">
                  <label for="new-password">New Password</label>
                  <input
                    type="password"
                    id="new-password"
                    name="newPassword"
                    placeholder="Leave blank to keep current"
                  />
                </div>
                <div class="form-group">
                  <label for="new-phone">New Phone Number</label>
                  <input
                    type="tel"
                    id="new-phone"
                    name="newPhone"
                    placeholder="Leave blank to keep current"
                  />
                </div>
                <div class="form-group">
                  <label for="favorite-item">Favorite Item</label>
                  <select id="favorite-item" name="favoriteItem">
                    <option value="">Select a favorite item</option>
                    <!-- Will be populated from menu items -->
                  </select>
                </div>
                <button type="submit" class="btn primary-btn">
                  Update Profile
                </button>
              </form>
            </div>
          </div>
        </section>

        <!-- Menu Section -->
        <section id="menu-section" class="dashboard-section">
          <h2>Menu</h2>
          <div class="card">
            <div class="filter-controls">
              <div class="form-group">
                <label for="menu-type-filter">Filter by Type</label>
                <select id="menu-type-filter">
                  <option value="">All Types</option>
                  <!-- Will be populated dynamically -->
                </select>
              </div>
              <div class="form-group">
                <label for="menu-price-filter">Max Price</label>
                <input
                  type="number"
                  id="menu-price-filter"
                  min="0"
                  step="0.01"
                  placeholder="Any price"
                />
              </div>
              <div class="form-group">
                <label for="menu-sort">Sort by</label>
                <select id="menu-sort">
                  <option value="name">Name</option>
                  <option value="price-asc">Price (Low to High)</option>
                  <option value="price-desc">Price (High to Low)</option>
                </select>
              </div>
              <button id="apply-filters" class="btn primary-btn">
                Apply Filters
              </button>
            </div>
            <div class="menu-items-container">
              <table id="menu-items">
                <thead>
                  <tr>
                    <th>Item Name</th>
                    <th>Type</th>
                    <th>Price</th>
                    <th>Description</th>
                    <th>Ingredients</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Will be populated dynamically -->
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- Place Order Section -->
        <section id="order-section" class="dashboard-section">
          <h2>Place Order</h2>
          <div class="card">
            <div class="store-selection">
              <h3>Select a Store</h3>
              <select id="store-select">
                <option value="">Select a store</option>
                <!-- Will be populated dynamically -->
              </select>
            </div>
            <div id="order-items-container" style="display: none">
              <h3>Add Items to Order</h3>
              <div class="order-item-row">
                <select class="order-item-select">
                  <option value="">Select an item</option>
                  <!-- Will be populated dynamically -->
                </select>
                <input
                  type="number"
                  class="order-item-quantity"
                  min="1"
                  value="1"
                  placeholder="Qty"
                />
                <button class="remove-item-btn btn secondary-btn">
                  Remove
                </button>
              </div>
              <button id="add-item-btn" class="btn primary-btn">
                Add Another Item
              </button>
              <div class="order-summary">
                <h3>Order Summary</h3>
                <div id="order-total">Total: $0.00</div>
                <button id="place-order-btn" class="btn primary-btn">
                  Place Order
                </button>
              </div>
            </div>
          </div>
        </section>

        <!-- Order History Section -->
        <section id="history-section" class="dashboard-section">
          <h2>Order History</h2>
          <div class="card">
            <div class="history-tabs">
              <button id="all-orders-tab" class="history-tab active">
                All Orders
              </button>
              <button id="recent-orders-tab" class="history-tab">
                Recent 5 Orders
              </button>
            </div>
            <div class="orders-list">
              <table id="orders-table">
                <thead>
                  <tr>
                    <th>Order ID</th>
                    <th>Date</th>
                    <th>Store</th>
                    <th>Total</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Will be populated dynamically -->
                </tbody>
              </table>
            </div>
            <div id="order-details" class="order-details" style="display: none">
              <h3>Order Details <span id="detail-order-id"></span></h3>
              <p><strong>Date:</strong> <span id="detail-date"></span></p>
              <p><strong>Store:</strong> <span id="detail-store"></span></p>
              <p><strong>Status:</strong> <span id="detail-status"></span></p>
              <p><strong>Total:</strong> <span id="detail-total"></span></p>
              <h4>Items</h4>
              <table id="detail-items">
                <thead>
                  <tr>
                    <th>Item</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Subtotal</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Will be populated dynamically -->
                </tbody>
              </table>
              <button id="close-details" class="btn secondary-btn">
                Close
              </button>
            </div>
          </div>
        </section>

        <!-- View Stores Section -->
        <section id="stores-section" class="dashboard-section">
          <h2>Our Stores</h2>
          <div class="card">
            <div class="stores-list">
              <table id="stores-table">
                <thead>
                  <tr>
                    <th>Store ID</th>
                    <th>Address</th>
                    <th>City</th>
                    <th>State</th>
                    <th>Status</th>
                    <th>Rating</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Will be populated dynamically -->
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- Update Order Status Section (for Drivers and Managers) -->
        <section id="update-status-section" class="dashboard-section">
          <h2>Update Order Status</h2>
          <div class="card">
            <div class="orders-list">
              <table id="update-status-table">
                <thead>
                  <tr>
                    <th>Order ID</th>
                    <th>Customer</th>
                    <th>Date</th>
                    <th>Store</th>
                    <th>Current Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Will be populated dynamically -->
                </tbody>
              </table>
            </div>
            <div id="status-update-form" style="display: none">
              <h3>
                Update Status for Order <span id="status-order-id"></span>
              </h3>
              <form id="order-status-form">
                <div class="form-group">
                  <label for="new-status">New Status</label>
                  <select id="new-status">
                    <option value="Placed">Placed</option>
                    <option value="Preparing">Preparing</option>
                    <option value="Ready">Ready</option>
                    <option value="Out for Delivery">Out for Delivery</option>
                    <option value="Delivered">Delivered</option>
                    <option value="Cancelled">Cancelled</option>
                  </select>
                </div>
                <div class="button-group">
                  <button type="submit" class="btn primary-btn">
                    Update Status
                  </button>
                  <button
                    type="button"
                    id="cancel-status-update"
                    class="btn secondary-btn"
                  >
                    Cancel
                  </button>
                </div>
              </form>
            </div>
          </div>
        </section>

        <!-- Update Menu Section (for Managers) -->
        <section id="update-menu-section" class="dashboard-section">
          <h2>Manage Menu</h2>
          <div class="card">
            <div class="menu-actions">
              <button id="add-menu-item-btn" class="btn primary-btn">
                Add New Item
              </button>
            </div>
            <div class="menu-items-container">
              <table id="manager-menu-items">
                <thead>
                  <tr>
                    <th>Item Name</th>
                    <th>Type</th>
                    <th>Price</th>
                    <th>Description</th>
                    <th>Ingredients</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Will be populated dynamically -->
                </tbody>
              </table>
            </div>
            <div id="menu-item-form" style="display: none">
              <h3 id="menu-form-title">Add New Item</h3>
              <form id="item-form">
                <input type="hidden" id="edit-mode" value="add" />
                <div class="form-group">
                  <label for="item-name">Item Name</label>
                  <input type="text" id="item-name" name="itemName" required />
                </div>
                <div class="form-group">
                  <label for="item-type">Type</label>
                  <input
                    type="text"
                    id="item-type"
                    name="typeOfItem"
                    required
                  />
                </div>
                <div class="form-group">
                  <label for="item-price">Price</label>
                  <input
                    type="number"
                    id="item-price"
                    name="price"
                    min="0"
                    step="0.01"
                    required
                  />
                </div>
                <div class="form-group">
                  <label for="item-description">Description</label>
                  <textarea
                    id="item-description"
                    name="description"
                    rows="3"
                  ></textarea>
                </div>
                <div class="form-group">
                  <label for="item-ingredients">Ingredients</label>
                  <textarea
                    id="item-ingredients"
                    name="ingredients"
                    rows="3"
                    required
                  ></textarea>
                </div>
                <div class="button-group">
                  <button type="submit" class="btn primary-btn">
                    Save Item
                  </button>
                  <button
                    type="button"
                    id="cancel-item-form"
                    class="btn secondary-btn"
                  >
                    Cancel
                  </button>
                </div>
              </form>
            </div>
          </div>
        </section>

        <!-- Update Users Section (for Managers) -->
        <section id="update-user-section" class="dashboard-section">
          <h2>Manage Users</h2>
          <div class="card">
            <div class="users-list">
              <table id="users-table">
                <thead>
                  <tr>
                    <th>Username</th>
                    <th>Role</th>
                    <th>Phone</th>
                    <th>Favorite Item</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Will be populated dynamically -->
                </tbody>
              </table>
            </div>
            <div id="user-update-form" style="display: none">
              <h3>Update User <span id="update-username"></span></h3>
              <form id="user-form">
                <div class="form-group">
                  <label for="user-role">Role</label>
                  <select id="user-role" name="role" required>
                    <option value="Customer">Customer</option>
                    <option value="Driver">Driver</option>
                    <option value="Manager">Manager</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="user-phone">Phone Number</label>
                  <input type="tel" id="user-phone" name="phoneNum" required />
                </div>
                <div class="form-group">
                  <label for="user-favorite">Favorite Item</label>
                  <select id="user-favorite" name="favoriteItem">
                    <option value="">None</option>
                    <!-- Will be populated from menu items -->
                  </select>
                </div>
                <div class="form-group">
                  <label for="user-new-password">New Password (Optional)</label>
                  <input
                    type="password"
                    id="user-new-password"
                    name="password"
                    placeholder="Leave blank to keep current"
                  />
                </div>
                <div class="button-group">
                  <button type="submit" class="btn primary-btn">
                    Update User
                  </button>
                  <button
                    type="button"
                    id="cancel-user-update"
                    class="btn secondary-btn"
                  >
                    Cancel
                  </button>
                </div>
              </form>
            </div>
          </div>
        </section>
      </main>
    </div>

    <div id="notification" class="notification"></div>

    <script src="scripts/auth.js"></script>
    <script src="scripts/profile.js"></script>
    <script src="scripts/menu.js"></script>
    <script src="scripts/orders.js"></script>
    <script src="scripts/stores.js"></script>
    <script src="scripts/dashboard.js"></script>
  </body>
</html>
